Great ‚Äî here are detailed feature specifications for two user roles in NomadSuite: Admin and Normal User. These specs are clear and ready for the Replit AI developer to implement.

‚∏ª

üé≠ Roles & Permissions Overview

Roles
	1.	Admin ‚Äî Full access within the workspace/account.
	2.	Normal User ‚Äî Limited access; sees data and performs actions but cannot change global settings or user-roles.

Basic Role Definitions & Control
	‚Ä¢	Use Role-Based Access Control (RBAC) so each user has a role.  Ôøº
	‚Ä¢	Each action in the system checked against the user‚Äôs role and workspace/tenant.
	‚Ä¢	Data isolation: normal users cannot access Admin-only views or settings.
	‚Ä¢	Admin role can invite others (if multi-user workspace is supported) and manage role assignments.
	‚Ä¢	Normal user role is scoped to their workspace and cannot change role assignments or subscription settings.

‚∏ª

üìã Admin Role ‚Äì Feature Specification

Admin Capabilities
	1.	User Management
	‚Ä¢	View list of users in the workspace.
	‚Ä¢	Add/invite new users (email invite).
	‚Ä¢	Assign roles (Admin / Normal User).
	‚Ä¢	Remove users or change their role.
	‚Ä¢	View user activity (logs: last login, actions) (optional for MVP).
	2.	Workspace/Subscription Settings
	‚Ä¢	View subscription plan details (Free, Pro, Premium) ‚Äî note: actual billing may be external for MVP.
	‚Ä¢	Upgrade/downgrade plan (link to billing provider).
	‚Ä¢	Set workspace name / default currency / default tax country.
	‚Ä¢	Enable/disable features for the workspace (e.g., turn on ‚ÄúTravel Log‚Äù module) ‚Äî basic toggles.
	3.	Data Access & Overviews
	‚Ä¢	Access all clients/invoices/trips/documents in the workspace.
	‚Ä¢	See summary dashboard: total clients, number of users, invoices overdue across users (if multiple).
	‚Ä¢	Export workspace data (CSV) for migration/backups.
	4.	Role-Specific Restrictions (what Admin cannot do)
	‚Ä¢	Admin cannot see other tenants‚Äô data (if multi-tenant SaaS supports multiple tenants).
	‚Ä¢	Admin cannot change internal system settings (like brand, database schema) for MVP.

UI Screens for Admin
	‚Ä¢	/app/users ‚Äî user list & invite modal.
	‚Ä¢	/app/settings/workspace ‚Äî workspace settings page.
	‚Ä¢	/app/settings/subscription ‚Äî subscription overview/upgrades.
	‚Ä¢	/app/dashboard ‚Äî with ‚ÄúAdmin summary‚Äù panel (users count, workspace usage).

Data Model Additions

Add table User with field role (ENUM: ‚ÄúADMIN‚Äù, ‚ÄúUSER‚Äù).
Add workspaceId (or tenantId) if multi-workspace supported.
Permissions logic: in API endpoints, check request.user.role === ‚ÄúADMIN‚Äù for admin-only endpoints.

‚∏ª

üìã Normal User Role ‚Äì Feature Specification

Normal User Capabilities
	1.	Client CRM Access
	‚Ä¢	Create/edit/delete clients (subject to workspace limits for free tier).
	‚Ä¢	Use pipeline board and list view.
	‚Ä¢	Add notes and timeline entries for clients.
	2.	Invoice & Payment Module
	‚Ä¢	Create invoice for any client.
	‚Ä¢	Mark invoice sent/paid.
	‚Ä¢	See invoice list, filter by status.
	‚Ä¢	Receive reminders for overdue invoices (triggered by system).
	‚Ä¢	Cannot change subscription/plan.
	3.	Travel & Residency Tracking
	‚Ä¢	Add/edit/delete trips (country, entry/exit date).
	‚Ä¢	View residency status, Schengen 90/180 visualization.
	‚Ä¢	Add/edit visas/permits (expiry alerts).
	4.	Document Vault
	‚Ä¢	Upload documents (passport, visa, contract, invoice).
	‚Ä¢	View list of documents with metadata (type, country, expiry date).
	‚Ä¢	Receive alerts for documents nearing expiry.
	5.	Dashboard View
	‚Ä¢	See own dashboard with metrics: active clients, open invoices, residency status.
	‚Ä¢	Receive alerts relevant to their data (not workspace-wide).

Normal User Restrictions
	‚Ä¢	Cannot invite or manage other users.
	‚Ä¢	Cannot change workspace/global settings (currency, default tax country, subscription plan).
	‚Ä¢	Cannot upgrade/downgrade plan or view other users‚Äô usage.
	‚Ä¢	Their view is scoped to workspace data but limited actions.

UI Screens for Normal User
	‚Ä¢	/app/dashboard ‚Äî standard view.
	‚Ä¢	/app/clients, /app/clients/[id] ‚Äî client management.
	‚Ä¢	/app/invoices, /app/invoices/new.
	‚Ä¢	/app/travel, /app/visas, /app/documents.
	‚Ä¢	/app/settings/profile ‚Äî personal profile (name, email, nationality, home country, currency).
	‚Ä¢	No /app/settings/users or /app/settings/subscription by default unless Admin.

‚∏ª

‚úÖ Clear Access Table

Feature Area	Admin Access	Normal User Access
View workspace usage/data	‚úÖ	Limited to own data
Manage users/roles	‚úÖ	‚ùå
Change workspace settings	‚úÖ	‚ùå
Create/Edit clients	‚úÖ	‚úÖ
View pipeline board	‚úÖ	‚úÖ
Create/Edit invoices	‚úÖ	‚úÖ
Upgrade plan	‚úÖ	‚ùå
Upload/view documents	‚úÖ	‚úÖ
Travel & residency logs	‚úÖ	‚úÖ
Alerts overview (global)	‚úÖ	Individual alerts


‚∏ª

üñ• API & Endpoint Spec (for Replit AI)

// Users
GET    /api/users            (Admin only)
POST   /api/users/invite     (Admin only)
PUT    /api/users/:userId/role (Admin only)
DELETE /api/users/:userId     (Admin only)

// Workspace settings
GET    /api/workspace/settings   (Admin)
PUT    /api/workspace/settings   (Admin)

// Client CRM
GET    /api/clients            (Admin & User)
POST   /api/clients            (Admin & User)
GET    /api/clients/:id        (Admin & User)
PUT    /api/clients/:id        (Admin & User)
DELETE /api/clients/:id        (Admin & User)

// Invoice Module
GET    /api/invoices           (Admin & User)
POST   /api/invoices           (Admin & User)
PUT    /api/invoices/:id       (Admin & User)
DELETE /api/invoices/:id       (Admin & User)  // maybe Admin only or establish rule

// Travel Logs
GET    /api/trips              (Admin & User)
POST   /api/trips              (Admin & User)
PUT    /api/trips/:id          (Admin & User)
DELETE /api/trips/:id          (Admin & User)

// Visas/Permits
GET    /api/visas              (Admin & User)
POST   /api/visas              (Admin & User)
PUT    /api/visas/:id          (Admin & User)
DELETE /api/visas/:id          (Admin & User)

// Documents
GET    /api/documents          (Admin & User)
POST   /api/documents/upload   (Admin & User)
GET    /api/documents/:id      (Admin & User)
DELETE /api/documents/:id      (Admin & User)

// Notifications/Alerts
GET    /api/alerts             (Admin & User)


‚∏ª

üß† Notes for Replit AI Developer
	‚Ä¢	Implement middleware to check user.role and user.workspaceId on each request.
	‚Ä¢	Use workspaceId (or tenantId) in each record (clients, invoices, trips, visas, documents) to ensure data isolation.
	‚Ä¢	Use ENUM for role field in User table.
	‚Ä¢	Default first user for a workspace = Admin.
	‚Ä¢	Free tier: limit number of clients or other features ‚Äî enforce in backend.
	‚Ä¢	For now MVP: single workspace per account is fine; multi-workspace support can come later.
	‚Ä¢	Use RBAC checks at endpoint level.

‚∏ª

If you like, I can now generate schema modifications for the User and Workspace tables (for admin/normal roles) and UI wireframe layouts for the Admin vs User views.